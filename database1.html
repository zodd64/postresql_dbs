Drop table IF EXISTS USERS cascade;
Drop table IF EXISTS MESSAGES cascade;
Drop table IF EXISTS COMENTS cascade;
Drop table IF EXISTS LIKES cascade;
Drop table IF EXISTS TEAMS cascade;
Drop table IF EXISTS TEAM_ADMIN cascade;
Drop table IF EXISTS TEAM_MEMBER cascade;
Drop table IF EXISTS FOLLOWS cascade;


/* Δημιουργία Πίνακα {ΧΡΗΣΤΗΣ} */
CREATE TABLE USERS(
	ONOMAXEIRISTH VARCHAR(30) NOT NULL,
	ONOMA VARCHAR(60) NOT NULL,
	EPONYMO VARCHAR(120),
	GENOS VARCHAR(20) NOT NULL,
	POLH VARCHAR(60),
	XORA VARCHAR(60) NOT NULL,
	PRIMARY KEY(ONOMAXEIRISTH));

/* Δημιουργία Πίνακα {ΜΗΝΥΜΑ} */
CREATE TABLE MESSAGES(
	SYG_MHNYMATOS VARCHAR(30) NOT NULL,
	KOD_MHNYMATOS INT NOT NULL,
	IDIOKTHTHS_TOIXOY VARCHAR(30) NOT NULL,
	PERIEXOMENO VARCHAR(4000) NOT NULL,
	HMEROMHNIA DATE NOT NULL,
	CHECK (KOD_MHNYMATOS > 0 ),
	PRIMARY KEY (KOD_MHNYMATOS),
	FOREIGN KEY (SYG_MHNYMATOS) REFERENCES USERS(ONOMAXEIRISTH),
	FOREIGN KEY (IDIOKTHTHS_TOIXOY) REFERENCES USERS(ONOMAXEIRISTH));
	
/* Δημιουργία Πίνακα {ΣΧΟΛΙΟ} */
CREATE TABLE COMENTS(
	SYG_MHNYMATOS VARCHAR(30) NOT NULL,
	KOD_MHNYMATOS INT NOT NULL,
	KOD_SXOLIOU INT NOT NULL,
	SUGGRAFEAS_SXOLIOU VARCHAR(30) NOT NULL,
	KEIMENO_SXOLIOU VARCHAR(4000) NOT NULL,
	HMEROMHNIA DATE NOT NULL,
	CHECK (KOD_MHNYMATOS > 0 ),
	CHECK (KOD_SXOLIOU > 0 ),
	PRIMARY KEY(KOD_MHNYMATOS,KOD_SXOLIOU),
	FOREIGN KEY (SYG_MHNYMATOS) REFERENCES USERS(ONOMAXEIRISTH),
	FOREIGN KEY (KOD_MHNYMATOS) REFERENCES MESSAGES(KOD_MHNYMATOS),
	FOREIGN KEY (SUGGRAFEAS_SXOLIOU) REFERENCES USERS(ONOMAXEIRISTH));
	
/* Δημιουργία Πίνακα {ΑΡΕΣΕΙ} */
CREATE TABLE LIKES(
	ONOMAXEIRISTH VARCHAR(30) NOT NULL,
	SYG_MHNYMATOS VARCHAR(30) NOT NULL,
	KOD_MHNYMATOS INT NOT NULL,
	CHECK (KOD_MHNYMATOS > 0 ),
	PRIMARY KEY (ONOMAXEIRISTH,SYG_MHNYMATOS,KOD_MHNYMATOS),
	FOREIGN KEY (ONOMAXEIRISTH) REFERENCES USERS(ONOMAXEIRISTH),
	FOREIGN KEY (SYG_MHNYMATOS) REFERENCES USERS(ONOMAXEIRISTH),
	FOREIGN KEY (KOD_MHNYMATOS) REFERENCES MESSAGES(KOD_MHNYMATOS));

CREATE TABLE TEAMS(
	TID INT NOT NULL,
	ONOMAOMADAS VARCHAR(30) NOT NULL,
	PRIMARY KEY(TID));
	
CREATE TABLE TEAM_ADMIN(
	TID INT NOT NULL,
	ONOMAXEIRISTH VARCHAR(30) NOT NULL,
	PRIMARY KEY (TID,ONOMAXEIRISTH),
	FOREIGN KEY (TID) REFERENCES TEAMS(TID),
	FOREIGN KEY (ONOMAXEIRISTH) REFERENCES USERS(ONOMAXEIRISTH));

CREATE TABLE TEAM_MEMBER(
	TID INT NOT NULL,
	ONOMAXEIRISTH VARCHAR(30) NOT NULL,
	PRIMARY KEY (TID,ONOMAXEIRISTH),
	FOREIGN KEY (TID) REFERENCES TEAMS(TID),
	FOREIGN KEY (ONOMAXEIRISTH) REFERENCES USERS(ONOMAXEIRISTH));	
	
CREATE TABLE FOLLOWS(
	FOLLOWER VARCHAR(30) NOT NULL REFERENCES USERS(ONOMAXEIRISTH),
	FOLLOWED VARCHAR(30) NOT NULL REFERENCES USERS(ONOMAXEIRISTH),
	HMEROMHNIA_DESMOU DATE NOT NULL,
	PRIMARY KEY (FOLLOWER,FOLLOWED));
	
/* eisagwgh dedomenwn */
INSERT INTO USERS (ONOMAXEIRISTH,ONOMA,EPONYMO,GENOS,POLH,XORA) VALUES
	('KOSTAS1234','KOSTAS','PETRAKHS','ANTRAS','ATHINA','ELLADA'),
	('MARKOS1337','MARKOS','PERAKHS','ANTRAS','LONDINO','AGGLIA'),
	('MARIA45','MARIA','PALHMETAKH','GYNAIKA','XANIA','ELLADA');

INSERT INTO MESSAGES (SYG_MHNYMATOS,KOD_MHNYMATOS,IDIOKTHTHS_TOIXOY,PERIEXOMENO,HMEROMHNIA) VALUES
	('KOSTAS1234',1,'MARIA45','PAME VOLTA AVRIO?','03/02/2019'),
	('KOSTAS1234',2,'MARKOS1337','KALH XRONIA','01/01/2021'),
	('MARKOS1337',3,'MARIA45','THEY SEE ME ROLLING','07/07/2018'),
	('MARIA45',4,'KOSTAS1234','XAXAXA','09/11/2016');	
	
INSERT INTO COMENTS (SYG_MHNYMATOS,KOD_MHNYMATOS,KOD_SXOLIOU,SUGGRAFEAS_SXOLIOU,KEIMENO_SXOLIOU,HMEROMHNIA) VALUES
	('KOSTAS1234',1,1,'MARIA45','PAME','03/03/19'),
	('KOSTAS1234',2,1,'MARKOS1337','EPISHS','02/01/2021'),
	('MARKOS1337',3,1,'MARIA45','THEY HATING','07/07/2018'),
	('MARIA45',4,1,'KOSTAS1234','TI GELAS?','09/11/2016'),
	('MARIA45',4,2,'MARKOS1337','PAEI TOXASE','10/11/2016');

INSERT INTO LIKES (ONOMAXEIRISTH,SYG_MHNYMATOS,KOD_MHNYMATOS) VALUES
	('KOSTAS1234','MARIA45',4),
	('MARIA45','MARKOS1337',3),
	('MARKOS1337','MARKOS1337',3),
	('MARIA45','KOSTAS1234',1);
	
INSERT INTO TEAMS (TID,ONOMAOMADAS) VALUES
	(1,'DREAM TEAM'),
	(2,'HRAKLEIWTES'),
	(3,'XANIWTES'),
	(4,'EASY RIDERS');

INSERT INTO TEAM_ADMIN (TID,ONOMAXEIRISTH) VALUES
	(1,'MARKOS1337'),
	(2,'MARKOS1337'),
	(2,'MARIA45'),
	(4,'KOSTAS1234');

INSERT INTO TEAM_MEMBER (TID,ONOMAXEIRISTH) VALUES
	(1,'MARIA45'),
	(1,'KOSTAS1234'),
	(3,'MARIA45'),
	(4,'MARKOS1337');
	
INSERT INTO FOLLOWS(FOLLOWER,FOLLOWED,HMEROMHNIA_DESMOU) VALUES
	('MARIA45','KOSTAS1234','10/10/2019'),
	('MARIA45','MARKOS1337','11/11/2020'),
	('KOSTAS1234','MARIA45','09/12/2018'),
	('MARKOS1337','KOSTAS1234','08/11/2017');
	